include_rules

CC_FLAGS += -Ibin/gen
LD_FLAGS += -lgdi32 -lopengl32

: foreach gen/*.lua |> !LUA |> bin/gen/%B.h {GEN}
: foreach src/video/*.c | {GEN} |> !CC |> bin/obj/video/%B.o {OBJ}
: {OBJ} |> !LD |> bin/code.exe {BIN}

ifeq ($(CONFIG),release)
	: {BIN} |> !UPX |> bin/code_upx.exe
endif